<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Transportation Orders</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="/styles.css">
</head>
<body>
  <h1>üöö Orders Dashboard</h1>
  <div class="actions">
    <button id="btn-create">Create Dummy Order</button>
    <button id="btn-refresh">Refresh</button>
  </div>
  <h3>üìù Add New Order </h3>
<form id="manualOrderForm">
  <input type="text" id="customer" placeholder="Customer Name" required>
  <input type="text" id="origin" placeholder="Origin" required>
  <input type="text" id="destination" placeholder="Destination" required>
  <select id="status" required>
    <option value="Processing">Processing</option>
    <option value="In Transit">In Transit</option>
    <option value="Delivered">Delivered</option>
  </select>
  <button type="submit">Add Order</button>
</form>
  <table>
    <thead><tr><th>ID</th><th>Customer</th><th>Origin</th><th>Destination</th><th>Status</th><th>Actions</th></tr></thead>
    <tbody id="orders-body"></tbody>
  </table>
<div>
  <button onclick="setRole('user')">Login as User</button>
  <button onclick="setRole('admin')">Login as Admin</button>
  <span id="roleDisplay" style="margin-left: 20px;"></span>
</div>

  <h3>Upload Shipping Doc</h3>
  <input id="orderIdUpload" type="number" placeholder="Order ID">
  <input id="fileInput" type="file">
  <button id="btn-upload">Upload</button>
<script>
  document.getElementById('manualOrderForm').addEventListener('submit', async function (e) {
    e.preventDefault();

    const customer = document.getElementById('customer').value;
    const origin = document.getElementById('origin').value;
    const destination = document.getElementById('destination').value;
    const status = document.getElementById('status').value;

    const response = await fetch('/api/orders', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({
        customer_name: customer,
        origin: origin,
        destination: destination,
        status: status
      })
    });

    if (response.ok) {
      alert('‚úÖ Order added!');
      location.reload(); // refresh to show new order
    } else {
      alert('‚ùå Failed to add order.');
    }
  });
</script>

  <script src="/app.js"></script>
</body>
</html>
